<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <title>ุงุฎุชุจุงุฑุงุช ุถุจุท ุงูููุณ ูุงููุธุงุฆู ุงูุชูููุฐูุฉ (ูุณุฎุฉ ุชุฌุฑูุจูุฉ)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- ุฎุท ุนุฑุจู ุจุณูุท -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Almarai:wght@300;400;700&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg: #0f172a;
      --card: #020617;
      --accent: #38bdf8;
      --accent-soft: rgba(56, 189, 248, 0.12);
      --fg: #e5e7eb;
      --muted: #94a3b8;
      --border: #1e293b;
      --danger: #f97373;
      --success: #4ade80;
      --warning: #facc15;
      --radius: 16px;
    }
    * {
      box-sizing: border-box;
    }
    body {
      margin: 0;
      padding: 16px;
      font-family: "Almarai", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      background: radial-gradient(circle at top, #1e293b 0, #020617 45%, #000 100%);
      color: var(--fg);
    }
    .app-shell {
      max-width: 1100px;
      margin: 0 auto;
    }
    header {
      padding: 16px 20px 12px;
      border-radius: var(--radius);
      background: linear-gradient(135deg, rgba(56, 189, 248, 0.16), rgba(15, 23, 42, 0.9));
      border: 1px solid rgba(148, 163, 184, 0.35);
      box-shadow: 0 18px 50px rgba(15, 23, 42, 0.9);
      margin-bottom: 16px;
    }
    header h1 {
      margin: 0 0 4px;
      font-size: 1.4rem;
      letter-spacing: 0.03em;
    }
    header p {
      margin: 0;
      font-size: 0.85rem;
      color: var(--muted);
    }
    .pill-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-top: 8px;
      font-size: 0.78rem;
    }
    .pill {
      padding: 3px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      color: var(--muted);
      background: rgba(15, 23, 42, 0.7);
    }

    /* ุชุจููุจ ุงูุงุฎุชุจุงุฑุงุช */
    .tabs {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 12px;
    }
    .tab-btn {
      flex: 1 1 150px;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: rgba(15, 23, 42, 0.85);
      color: var(--muted);
      padding: 8px 10px;
      font-size: 0.82rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      transition: all 0.18s ease;
    }
    .tab-btn span.emoji {
      font-size: 1.1rem;
    }
    .tab-btn.active {
      background: var(--accent-soft);
      color: var(--fg);
      border-color: var(--accent);
      box-shadow: 0 0 0 1px rgba(56, 189, 248, 0.3);
    }
    .tab-btn:hover {
      border-color: var(--accent);
    }

    .panel {
      display: none;
      padding: 14px 14px 16px;
      border-radius: var(--radius);
      background: radial-gradient(circle at top left, rgba(56, 189, 248, 0.08), rgba(15, 23, 42, 0.96));
      border: 1px solid var(--border);
      box-shadow: 0 14px 40px rgba(15, 23, 42, 0.9);
      margin-bottom: 18px;
    }
    .panel.active {
      display: block;
    }
    .panel h2 {
      margin: 0 0 6px;
      font-size: 1.05rem;
    }
    .panel p.lead {
      margin: 0 0 10px;
      font-size: 0.84rem;
      color: var(--muted);
    }
    .hint {
      font-size: 0.8rem;
      color: var(--muted);
      margin-bottom: 8px;
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 2px 8px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.45);
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 8px 16px;
      font-size: 0.86rem;
      cursor: pointer;
      background: var(--accent);
      color: #0f172a;
      font-weight: 600;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin: 4px 2px;
      box-shadow: 0 10px 26px rgba(56, 189, 248, 0.4);
      transition: transform 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
    }
    .btn:hover {
      transform: translateY(-1px);
      box-shadow: 0 14px 34px rgba(56, 189, 248, 0.5);
    }
    .btn:disabled {
      opacity: 0.45;
      cursor: default;
      box-shadow: none;
    }
    .btn-secondary {
      background: rgba(15, 23, 42, 0.95);
      color: var(--muted);
      border: 1px solid var(--border);
      box-shadow: none;
    }
    .btn-secondary:hover {
      background: rgba(15, 23, 42, 0.9);
    }

    .test-area {
      margin-top: 8px;
      padding: 12px;
      border-radius: 14px;
      border: 1px dashed rgba(148, 163, 184, 0.4);
      min-height: 80px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      text-align: center;
    }
    .stimulus-circle {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      border: 3px solid rgba(148, 163, 184, 0.45);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      font-weight: 700;
    }
    .result-box {
      margin-top: 8px;
      border-radius: 12px;
      padding: 8px 10px;
      background: rgba(15, 23, 42, 0.9);
      border: 1px solid rgba(148, 163, 184, 0.4);
      font-size: 0.8rem;
      color: var(--muted);
    }
    .result-box strong {
      color: var(--fg);
    }

    .stroop-word {
      font-size: 1.6rem;
      font-weight: 700;
      letter-spacing: 0.1em;
      padding: 4px 10px;
      border-radius: 999px;
      border: 1px solid rgba(148, 163, 184, 0.4);
      background: rgba(15, 23, 42, 0.9);
      min-width: 160px;
      text-align: center;
    }

    .row {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      align-items: center;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      font-size: 0.8rem;
      margin-top: 8px;
    }
    th, td {
      border: 1px solid rgba(30, 41, 59, 0.9);
      padding: 6px;
      text-align: center;
    }
    th {
      background: rgba(15, 23, 42, 0.95);
      color: var(--muted);
      font-weight: 600;
    }
    td {
      background: rgba(15, 23, 42, 0.9);
    }

    .digit-display {
      font-size: 2.6rem;
      font-weight: 700;
      letter-spacing: 0.15em;
    }
    .countdown {
      font-size: 1.1rem;
      color: var(--warning);
    }
    .status-ok {
      color: var(--success);
    }
    .status-bad {
      color: var(--danger);
    }

    @media (max-width: 640px) {
      header {
        padding: 12px 12px 10px;
      }
      .panel {
        padding: 10px 10px 12px;
      }
      .tab-btn {
        font-size: 0.78rem;
        padding: 6px 8px;
      }
    }
  </style>
</head>
<body>
<div class="app-shell">
  <header>
    <h1>ุงุฎุชุจุงุฑุงุช ุชูููุฐูุฉ ูุณุชูุญุงุฉ ูู ุงุฎุชุจุงุฑ ุงููุงุฑุดูููู</h1>
    <p>ูุฐู ุตูุญุฉ ุชุฌุฑูุจูุฉ ูุงุฎุชุจุงุฑ ุจุนุถ ุงููุธุงุฆู ุงูุชูููุฐูุฉ: ุถุจุท ุงูุงูุฏูุงุนุ ุงูุงูุชุจุงูุ ุชุฃุฌูู ุงูููุงูุฃุฉุ ูุงูุชุซุจูุท ุงููุนุฑูู. ููุถูู ุชุดุบูู ุงุฎุชุจุงุฑ ูุงุญุฏ ูู ูู ูุฑุฉ.</p>
    <div class="pill-row">
      <div class="pill">โฑ๏ธ ูู ุงุฎุชุจุงุฑ ูุณุชุบุฑู ุฃูู ูู ูขโูฃ ุฏูุงุฆู</div>
      <div class="pill">๐ง ุงููุชุงุฆุฌ ุชูุฑูุจูุฉ ููุชุฏุฑูุจ ุงูุฐุงุชู ูููุณุช ุชุดุฎูุตูุง ุทุจููุง</div>
    </div>
  </header>

  <!-- ุฃุฒุฑุงุฑ ุงูุชุจููุจ -->
  <div class="tabs">
    <button class="tab-btn active" data-target="go-nogo">
      <span class="emoji">๐ข</span><span>Go / No-Go</span>
    </button>
    <button class="tab-btn" data-target="stroop">
      <span class="emoji">๐จ</span><span>Stroop</span>
    </button>
    <button class="tab-btn" data-target="stopsignal">
      <span class="emoji">๐</span><span>Stop-Signal</span>
    </button>
    <button class="tab-btn" data-target="delaydiscount">
      <span class="emoji">โณ</span><span>ุชุฃุฌูู ุงูููุงูุฃุฉ</span>
    </button>
    <button class="tab-btn" data-target="visualdelay">
      <span class="emoji">๐</span><span>ุชุฌุฑุจุฉ ุงูุงูุชุธุงุฑ</span>
    </button>
    <button class="tab-btn" data-target="sustained">
      <span class="emoji">๐ฏ</span><span>ุงูุชุจุงู ูุณุชูุฑ</span>
    </button>
  </div>

  <!-- ููุญุฉ Go/No-Go -->
  <section id="go-nogo" class="panel active">
    <h2>ุงุฎุชุจุงุฑ Go / No-Go</h2>
    <p class="lead">ูููุณ ูุฏุฑุชู ุนูู ุงูุถุบุท ููุท ุนูุฏ ุธููุฑ ุฅุดุงุฑุฉ "ุงูุทูู" (GO)ุ ูุงูุงูุชูุงุน ุนูุฏ ุธููุฑ ุฅุดุงุฑุฉ "ุชูููู" (NO-GO). ูุฐุง ูููุณ ุงูุชุซุจูุท ุงูุญุฑูู ูุถุจุท ุงูุงูุฏูุงุน.</p>
    <div class="badge">๐ ุนุฏุฏ ุงููุญุงููุงุช: ูขู ุชูุฑูุจูุง</div>
    <p class="hint">ุงูุชุนูููุงุช: ุนูุฏูุง ุชุฑู ุงูุฏุงุฆุฑุฉ <strong>ุงูุฎุถุฑุงุก</strong> ุงููุฑ ุฏุงุฎู ุงููุฑุจุน. ุนูุฏูุง ุชุฑู ุงูุฏุงุฆุฑุฉ <strong>ุงูุญูุฑุงุก</strong> ูุง ุชููุฑ.</p>

    <button class="btn" id="goNogoStart">โถ๏ธ ุจุฏุก ุงูุงุฎุชุจุงุฑ</button>
    <button class="btn btn-secondary" id="goNogoReset">ุฅุนุงุฏุฉ ุงูุชููุฆุฉ</button>

    <div class="test-area" id="goNogoArea">
      <div>ุงุถุบุท "ุจุฏุก ุงูุงุฎุชุจุงุฑ" ูุชุธูุฑ ูู ุณูุณูุฉ ูู ุงูุฏูุงุฆุฑ.</div>
    </div>
    <div class="result-box" id="goNogoResult" style="display:none;"></div>
  </section>

  <!-- ููุญุฉ Stroop -->
  <section id="stroop" class="panel">
    <h2>ุงุฎุชุจุงุฑ ุณุชุฑูุจ (Stroop)</h2>
    <p class="lead">ูููุณ ูุฏุฑุชู ุนูู ุชุฌุงูู ุงููุนูู ุงูุชููุงุฆู ูููููุฉ ูุงูุชุฑููุฒ ููุท ุนูู ููู ุงููููุฉ. ูุฐุง ุงุฎุชุจุงุฑ ููุงุณููู ูููุธุงุฆู ุงูุชูููุฐูุฉ (ุงูุชุซุจูุท ุงููุนุฑูู).</p>
    <div class="badge">๐จ ูููุชู: ุงุฎุชุฑ <strong>ููู ุงูุญุจุฑ</strong> ูููุณ ูุนูู ุงููููุฉ.</div>
    <p class="hint">ูุซุงู: ุฅุฐุง ูุงูุช ุงููููุฉ "ุฃุตูุฑ" ููุชูุจุฉ ุจุงูููู ุงูุฃุฒุฑูุ ูุงูุฌูุงุจ ุงูุตุญูุญ ูู "ุฃุฒุฑู".</p>

    <button class="btn" id="stroopStart">โถ๏ธ ุจุฏุก ุณูุณูุฉ ูุตูุฑุฉ</button>
    <button class="btn btn-secondary" id="stroopReset">ุฅุนุงุฏุฉ ุงูุชููุฆุฉ</button>

    <div class="test-area" id="stroopArea">
      <div>ุงุถุบุท "ุจุฏุก ุณูุณูุฉ ูุตูุฑุฉ" ูุนุฑุถ ุงููููุงุช.</div>
    </div>
    <div class="row" style="margin-top:6px;">
      <button class="btn btn-secondary" data-stroop-color="red" style="border-color:#f87171;">ุฃุญูุฑ</button>
      <button class="btn btn-secondary" data-stroop-color="green" style="border-color:#4ade80;">ุฃุฎุถุฑ</button>
      <button class="btn btn-secondary" data-stroop-color="blue" style="border-color:#60a5fa;">ุฃุฒุฑู</button>
      <button class="btn btn-secondary" data-stroop-color="gold" style="border-color:#facc15;">ุฃุตูุฑ</button>
    </div>
    <div class="result-box" id="stroopResult" style="display:none;"></div>
  </section>

  <!-- ููุญุฉ Stop-Signal -->
  <section id="stopsignal" class="panel">
    <h2>ุงุฎุชุจุงุฑ ุฅุดุงุฑุฉ ุงูุชูููู (Stop-Signal)</h2>
    <p class="lead">ูู ูุฐุง ุงูุงุฎุชุจุงุฑ ูุฌุจ ุนููู ุงูุงุณุชุฌุงุจุฉ ูุงุชุฌุงู ุงูุณููุ ูููู ุฅุฐุง ุธูุฑุช ุฅุดุงุฑุฉ ุงูุชูููู ุงูุญูุฑุงุก ูุฌุฃุฉ ูุฌุจ ุฃู ุชุชููู ููุง ุชุถุบุท. ูุฐุง ูููุณ ุณุฑุนุฉ ุงูุชุซุจูุท ุจุนุฏ ุจุฏุก ุงููุนู.</p>
    <div class="badge">โฑ๏ธ ููุถูู ุชุดุบููู ูุฃูุช ูุงุฏุฆุ ูขู ูุญุงููุฉ ุชูุฑูุจูุง.</div>
    <p class="hint">ุงูุชุนูููุงุช: ุงููุฑ "ูุณุงุฑ" ุฅุฐุง ูุงู ุงูุณูู โุ ู"ูููู" ุฅุฐุง ูุงู ุงูุณูู โุ <strong>ููุท ุฅุฐุง ูู ุชุธูุฑ ุฅุดุงุฑุฉ ุงูุชูููู ๐</strong>.</p>

    <button class="btn" id="stopStart">โถ๏ธ ุจุฏุก ุงูุงุฎุชุจุงุฑ</button>
    <button class="btn btn-secondary" id="stopReset">ุฅุนุงุฏุฉ ุงูุชููุฆุฉ</button>

    <div class="test-area" id="stopArea">
      <div>ุจุนุฏ ุงูุถุบุท ุนูู "ุจุฏุก"ุ ุณูุธูุฑ ุณููุ ูุฃุญูุงููุง ุฅุดุงุฑุฉ ุชูููู.</div>
    </div>
    <div class="row" style="margin-top:6px;">
      <button class="btn btn-secondary" id="stopLeft">ูุณุงุฑ โ</button>
      <button class="btn btn-secondary" id="stopRight">ูููู โ</button>
    </div>
    <div class="result-box" id="stopResult" style="display:none;"></div>
  </section>

  <!-- ููุญุฉ Delay Discounting -->
  <section id="delaydiscount" class="panel">
    <h2>ุงุฎุชุจุงุฑ ุชูุถูู ุงูููุงูุฃุฉ ุงูุขู ููุงุจู ูุงุญููุง</h2>
    <p class="lead">ูุฐุง ุงูุงุฎุชุจุงุฑ ุงูุจุณูุท ูููุณ ุงุชุฌุงูู ุงูุนุงู: ูู ุชููู ููููุงูุขุช ุงูุตุบูุฑุฉ ุงูููุฑูุฉ ุฃู ุงููุจูุฑุฉ ุงููุคุฌููุฉุ</p>
    <div class="badge">๐ฐ ุงูุงุฎุชุจุงุฑ ูุธุฑู ููุชุฏุฑูุจ ุงูุฐููู ููุท.</div>

    <p class="hint">ุงุฎุชุฑ ูุง ุชูุถูู ูู ูู ุณุทุฑ:</p>
    <form id="delayForm">
      <table>
        <thead>
          <tr>
            <th>ุงูุฎูุงุฑ</th>
            <th>ุงูุขู</th>
            <th>ูุงุญููุง</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ูก</td>
            <td><label><input type="radio" name="q1" value="now"> ูขู ุฑูุงู ุงูุขู</label></td>
            <td><label><input type="radio" name="q1" value="later"> ูฅู ุฑูุงู ุจุนุฏ ุฃุณุจูุน</label></td>
          </tr>
          <tr>
            <td>ูข</td>
            <td><label><input type="radio" name="q2" value="now"> ูฅู ุฑูุงู ุงูุขู</label></td>
            <td><label><input type="radio" name="q2" value="later"> ูกูขู ุฑูุงู ุจุนุฏ ุดูุฑ</label></td>
          </tr>
          <tr>
            <td>ูฃ</td>
            <td><label><input type="radio" name="q3" value="now"> ุณุงุนุฉ ุชุฑููู ุงูุขู</label></td>
            <td><label><input type="radio" name="q3" value="later"> ููู ูุงูู ุฅุฌุงุฒุฉ ุจุนุฏ ุฃุณุจูุนูู</label></td>
          </tr>
          <tr>
            <td>ูค</td>
            <td><label><input type="radio" name="q4" value="now"> ูุฌุจุฉ ุณุฑูุนุฉ ุงูุขู</label></td>
            <td><label><input type="radio" name="q4" value="later"> ุนุดุงุก ูุงุฎุฑ ุจุนุฏ ุซูุงุซุฉ ุฃูุงู</label></td>
          </tr>
          <tr>
            <td>ูฅ</td>
            <td><label><input type="radio" name="q5" value="now"> ุดุฑุงุก ุดูุก ุจุณูุท ุงูููู</label></td>
            <td><label><input type="radio" name="q5" value="later"> ุงุฏุฎุงุฑ ูููุณุชูุจู ุจุนุฏ ุดูุฑ</label></td>
          </tr>
        </tbody>
      </table>
      <button type="button" class="btn" id="delayCalc">๐ ุชุญููู ุงููุชูุฌุฉ</button>
      <button type="reset" class="btn btn-secondary">ูุณุญ ุงูุงุฎุชูุงุฑุงุช</button>
    </form>
    <div class="result-box" id="delayResult" style="display:none;"></div>
  </section>

  <!-- ููุญุฉ Visual Delay -->
  <section id="visualdelay" class="panel">
    <h2>ุชุฌุฑุจุฉ ุงูุงูุชุธุงุฑ (ูุญุงูุงุฉ ุจุณูุทุฉ)</h2>
    <p class="lead">ูุฐู ููุณุช ุชุฌุฑุจุฉ ูุฎุจุฑูุฉ ุญููููุฉุ ุจู ุชูุฑูู ุฐููู ุนููู: ูู ุชูุจู ููุงูุฃุฉ ุจุณูุทุฉ ุงูุขู ุฃู ููุงูุฃุฉ ุฃูุจุฑ ุจุนุฏ ุซูุงูู ููููุฉุ</p>
    <div class="badge">โณ ุงููุฏู: ุงูุฅุญุณุงุณ ุงูููุณู ุจููุฑุฉ ุชุฃุฌูู ุงูุฅุดุจุงุน.</div>
    <p class="hint">ุงุฎุชุฑ ุฃุญุฏ ุงูุฎูุงุฑูู ูุชุดุนุฑ ุจุงููุฑู ุฏุงุฎูููุงุ ุซู ูุงุญุธ ุดุนูุฑู ุฃุซูุงุก ุงูุงูุชุธุงุฑ.</p>

    <div class="test-area" id="visualArea">
      <p><strong>ุงูุชุฌุฑุจุฉ:</strong></p>
      <p>๐ ููููู ุงูุญุตูู ุนูู "ูุนูููุฉ ุจุณูุทุฉ" ุงูุขูุ ุฃู "ูุนูููุฉ ุฃุนูู + ุชูุฑูู ุฅุถุงูู" ุจุนุฏ ูกู ุซูุงูู.</p>
      <div>
        <button class="btn btn-secondary" id="visualNow">ุฃุฑูุฏ ุงูููุงูุฃุฉ ุงูุขู (ุตุบูุฑุฉ)</button>
        <button class="btn" id="visualWait">ุฃูุชุธุฑ ูกู ุซูุงูู ูููุงูุฃุฉ ุฃูุจุฑ</button>
      </div>
      <div id="visualStatus" style="margin-top:8px; font-size:0.9rem;"></div>
    </div>
  </section>

  <!-- ููุญุฉ Sustained Attention -->
  <section id="sustained" class="panel">
    <h2>ุงุฎุชุจุงุฑ ุงูุงูุชุจุงู ุงููุณุชูุฑ</h2>
    <p class="lead">ุณูุชู ุนุฑุถ ุฃุฑูุงู ุนุดูุงุฆูุฉ ุณุฑูุนุฉ. ูููุชู ุฃู ุชููุฑ ุงูุฒุฑ ููุท ุนูุฏูุง ุชุฑู ุงูุฑูู "ู". ูุฐุง ูููุณ ุงููุฏุฑุฉ ุนูู ุงูุญูุงุธ ุนูู ุงูุงูุชุจุงู ูุงูุชุนุฑู ุนูู ููุท ูุญุฏุฏ.</p>
    <div class="badge">๐ฏ ุนุฏุฏ ุงููุญุงููุงุช: ุญูุงูู ูฃู ุฑูู.</div>
    <p class="hint">ุงูุชุนูููุงุช: ุนูุฏูุง ุชุฑู "ู" ุงููุฑ ุฒุฑ "ุฑุฃูุช ุตูุฑ ุงูุขู". ุญุงูู ุฃูุง ุชุถุบุท ูู ุบูุฑ ููุชู.</p>

    <button class="btn" id="sustainedStart">โถ๏ธ ุจุฏุก ุงูุงุฎุชุจุงุฑ</button>
    <button class="btn btn-secondary" id="sustainedReset">ุฅุนุงุฏุฉ ุงูุชููุฆุฉ</button>

    <div class="test-area" id="sustainedArea">
      <div>ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑุ ุณุชุธูุฑ ุฃุฑูุงู ูุณุท ุงูุดุงุดุฉ.</div>
    </div>
    <div style="margin-top:6px;">
      <button class="btn btn-secondary" id="sustainedHitBtn">ุฑุฃูุช ุตูุฑ ุงูุขู</button>
    </div>
    <div class="result-box" id="sustainedResult" style="display:none;"></div>
  </section>

</div>

<script>
  // ุชุจููุจ ุงูููุญุงุช
  const tabButtons = document.querySelectorAll('.tab-btn');
  const panels = document.querySelectorAll('.panel');
  tabButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      const target = btn.getAttribute('data-target');
      tabButtons.forEach(b => b.classList.remove('active'));
      panels.forEach(p => p.classList.remove('active'));
      btn.classList.add('active');
      document.getElementById(target).classList.add('active');
    });
  });

  /* =============== 1) Go / No-Go =============== */
  const goNogoArea = document.getElementById('goNogoArea');
  const goNogoResult = document.getElementById('goNogoResult');
  const goNogoStartBtn = document.getElementById('goNogoStart');
  const goNogoResetBtn = document.getElementById('goNogoReset');

  let goNogoRunning = false;
  let goNogoTrials = 20;
  let goNogoCurrent = 0;
  let goNogoData = [];
  let goNogoTrialActive = false;
  let goNogoTrialType = null;
  let goNogoClicked = false;

  function renderGoNogoStimulus(type) {
    goNogoArea.innerHTML = '';
    const circle = document.createElement('div');
    circle.className = 'stimulus-circle';
    circle.textContent = type === 'go' ? 'GO' : 'NO';
    circle.style.background = type === 'go' ? 'rgba(34,197,94,0.18)' : 'rgba(248,113,113,0.18)';
    circle.style.borderColor = type === 'go' ? '#4ade80' : '#f87171';
    circle.style.color = type === 'go' ? '#bbf7d0' : '#fecaca';
    const helper = document.createElement('div');
    helper.style.fontSize = '0.78rem';
    helper.style.color = 'var(--muted)';
    helper.textContent = type === 'go' ? 'ุงููุฑ ุฏุงุฎู ุงููุฑุจุน ุงูุขู' : 'ูุง ุชููุฑ ุงูุขู';
    goNogoArea.appendChild(circle);
    goNogoArea.appendChild(helper);
  }

  goNogoArea.addEventListener('click', () => {
    if (!goNogoRunning || !goNogoTrialActive) return;
    goNogoClicked = true;
  });

  function runGoNogoTrial() {
    if (!goNogoRunning || goNogoCurrent >= goNogoTrials) {
      goNogoRunning = false;
      goNogoStartBtn.disabled = false;
      showGoNogoResult();
      return;
    }
    goNogoTrialActive = true;
    goNogoClicked = false;
    // 70% GO, 30% NO-GO
    goNogoTrialType = Math.random() < 0.7 ? 'go' : 'nogo';
    renderGoNogoStimulus(goNogoTrialType);

    const thisIndex = goNogoCurrent;
    setTimeout(() => {
      // ููุงูุฉ ุงููุญุงููุฉ
      goNogoTrialActive = false;
      let outcome;
      if (goNogoTrialType === 'go') {
        outcome = goNogoClicked ? 'correct_go' : 'omission';
      } else {
        outcome = goNogoClicked ? 'commission' : 'correct_nogo';
      }
      goNogoData.push({ trial: thisIndex + 1, type: goNogoTrialType, clicked: goNogoClicked, outcome });
      goNogoCurrent++;
      goNogoArea.innerHTML = '<div style="font-size:0.8rem; color:var(--muted);">...</div>';
      setTimeout(runGoNogoTrial, 400);
    }, 900);
  }

  function showGoNogoResult() {
    let correctGo = 0, correctNo = 0, omissions = 0, commissions = 0;
    goNogoData.forEach(t => {
      if (t.outcome === 'correct_go') correctGo++;
      if (t.outcome === 'correct_nogo') correctNo++;
      if (t.outcome === 'omission') omissions++;
      if (t.outcome === 'commission') commissions++;
    });
    const total = goNogoData.length || 1;
    const accuracy = Math.round(((correctGo + correctNo) / total) * 100);
    let interpretation = '';
    if (accuracy >= 80 && commissions <= omissions) {
      interpretation = 'ูุดูุฑ ุงูุฃุฏุงุก ุฅูู ูุฏุฑุฉ ุฌูุฏุฉ ุนูู ุถุจุท ุงูุงูุฏูุงุน ูู ูุฐุง ุงูุณูุงู ุงูุจุณูุท.';
    } else if (commissions > omissions) {
      interpretation = 'ุชูุฌุฏ ูุฒุนุฉ ููุถุบุท ูู ูุญุธุงุช ูุฌุจ ูููุง ุงูุชููู (ุงูุฏูุงุน ุฃุนูู)ุ ูููู ุชุญุณูููุง ุจุงูุชุฏุฑูุจ.';
    } else {
      interpretation = 'ูููู ุฃู ูููุฏู ุชุญุณูู ุงูุชุฑููุฒ ูุงูุงุณุชูุฑุงุฑูุฉุ ูููุณ ููุท ุถุจุท ุงูุงูุฏูุงุน.';
    }
    goNogoResult.style.display = 'block';
    goNogoResult.innerHTML = `
      <div><strong>ุงููุชูุฌุฉ ุงูุชูุฑูุจูุฉ:</strong></div>
      <div>ุงูุฏููุฉ ุงูุนุงูุฉ: <strong>${accuracy}%</strong></div>
      <div>ุงุณุชุฌุงุจุงุช ุตุญูุญุฉ ูู GO: ${correctGo}</div>
      <div>ุชูููู ุตุญูุญ ูู NO-GO: ${correctNo}</div>
      <div>ุฃุฎุทุงุก ุนุฏู ุงุณุชุฌุงุจุฉ (ุชุฌุงูู GO): <span class="status-bad">${omissions}</span></div>
      <div>ุฃุฎุทุงุก ุงูุฏูุงุนูุฉ (ุถุบุท ูู NO-GO): <span class="status-bad">${commissions}</span></div>
      <div style="margin-top:6px;">๐ง <em>${interpretation}</em></div>
    `;
    goNogoArea.innerHTML = '<div>ููููู ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ ุฅุฐุง ุฑุบุจุช.</div>';
  }

  goNogoStartBtn.addEventListener('click', () => {
    goNogoRunning = true;
    goNogoCurrent = 0;
    goNogoData = [];
    goNogoResult.style.display = 'none';
    goNogoStartBtn.disabled = true;
    runGoNogoTrial();
  });

  goNogoResetBtn.addEventListener('click', () => {
    goNogoRunning = false;
    goNogoCurrent = 0;
    goNogoData = [];
    goNogoTrialActive = false;
    goNogoClicked = false;
    goNogoStartBtn.disabled = false;
    goNogoArea.innerHTML = '<div>ุงุถุบุท "ุจุฏุก ุงูุงุฎุชุจุงุฑ" ูุชุธูุฑ ูู ุณูุณูุฉ ูู ุงูุฏูุงุฆุฑ.</div>';
    goNogoResult.style.display = 'none';
  });

  /* =============== 2) Stroop =============== */
  const stroopArea = document.getElementById('stroopArea');
  const stroopResult = document.getElementById('stroopResult');
  const stroopStartBtn = document.getElementById('stroopStart');
  const stroopResetBtn = document.getElementById('stroopReset');
  const stroopButtons = document.querySelectorAll('[data-stroop-color]');

  const stroopWords = [
    { text: 'ุฃุญูุฑ', colorKey: 'red' },
    { text: 'ุฃุฎุถุฑ', colorKey: 'green' },
    { text: 'ุฃุฒุฑู', colorKey: 'blue' },
    { text: 'ุฃุตูุฑ', colorKey: 'gold' }
  ];
  const stroopColorMap = {
    red: '#f97373',
    green: '#4ade80',
    blue: '#60a5fa',
    gold: '#facc15'
  };

  let stroopRunning = false;
  let stroopTrials = 12;
  let stroopCurrent = 0;
  let stroopData = [];
  let stroopCurrentColorKey = null;

  function nextStroopTrial() {
    if (!stroopRunning || stroopCurrent >= stroopTrials) {
      stroopRunning = false;
      stroopStartBtn.disabled = false;
      renderStroopResult();
      return;
    }
    stroopArea.innerHTML = '';
    const wordObj = stroopWords[Math.floor(Math.random() * stroopWords.length)];
    const isCongruent = Math.random() < 0.5;
    let colorKey;
    if (isCongruent) {
      colorKey = wordObj.colorKey;
    } else {
      const other = stroopWords.filter(w => w.colorKey !== wordObj.colorKey);
      colorKey = other[Math.floor(Math.random() * other.length)].colorKey;
    }
    stroopCurrentColorKey = colorKey;
    const span = document.createElement('div');
    span.className = 'stroop-word';
    span.textContent = wordObj.text;
    span.style.color = stroopColorMap[colorKey];
    stroopArea.appendChild(span);
    const helper = document.createElement('div');
    helper.style.fontSize = '0.78rem';
    helper.style.color = 'var(--muted)';
    helper.textContent = 'ุงุฎุชุฑ ููู ุงูุญุจุฑ ูู ุงูุฃุฒุฑุงุฑ ุจุงูุฃุณูู.';
    stroopArea.appendChild(helper);
  }

  function renderStroopResult() {
    const total = stroopData.length || 1;
    const correct = stroopData.filter(t => t.correct).length;
    const accuracy = Math.round((correct / total) * 100);
    let interpretation = '';
    if (accuracy >= 80) {
      interpretation = 'ูุดูุฑ ุงูุฃุฏุงุก ุฅูู ูุฏุฑุฉ ุฌูุฏุฉ ุนูู ุชุฌุงูู ุงููุนูู ุงูุชููุงุฆู ูุงูุชุฑููุฒ ุนูู ููู ุงูุญุจุฑ (ุชุซุจูุท ูุนุฑูู ุฌูุฏ).';
    } else {
      interpretation = 'ูููู ุฃู ูููุฏู ูุฒูุฏ ูู ุงูุชุฏุฑูุจ ุนูู ุงูุชุฑููุฒ ูู ุนูุตุฑ ูุงุญุฏ ูุชุฌุงูู ุงูุนูุงุตุฑ ุงููุชุนุงุฑุถุฉ.';
    }
    stroopResult.style.display = 'block';
    stroopResult.innerHTML = `
      <div><strong>ุงููุชูุฌุฉ ุงูุชูุฑูุจูุฉ:</strong></div>
      <div>ุงูุฏููุฉ: <strong>${accuracy}%</strong> (ุตุญูุญ: ${correct} / ${total})</div>
      <div style="margin-top:6px;">๐ง <em>${interpretation}</em></div>
    `;
    stroopArea.innerHTML = '<div>ุงูุชูุช ุงูุณูุณูุฉ. ููููู ุฅุนุงุฏุฉ ุงูุจุฏุก ุฅุฐุง ุฑุบุจุช.</div>';
  }

  stroopStartBtn.addEventListener('click', () => {
    stroopRunning = true;
    stroopCurrent = 0;
    stroopData = [];
    stroopResult.style.display = 'none';
    stroopStartBtn.disabled = true;
    nextStroopTrial();
  });

  stroopResetBtn.addEventListener('click', () => {
    stroopRunning = false;
    stroopCurrent = 0;
    stroopData = [];
    stroopCurrentColorKey = null;
    stroopStartBtn.disabled = false;
    stroopArea.innerHTML = '<div>ุงุถุบุท "ุจุฏุก ุณูุณูุฉ ูุตูุฑุฉ" ูุนุฑุถ ุงููููุงุช.</div>';
    stroopResult.style.display = 'none';
  });

  stroopButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      if (!stroopRunning || stroopCurrentColorKey === null) return;
      const chosen = btn.getAttribute('data-stroop-color');
      const correct = chosen === stroopCurrentColorKey;
      stroopData.push({ trial: stroopCurrent + 1, chosen, correct, trueColor: stroopCurrentColorKey });
      stroopCurrent++;
      stroopCurrentColorKey = null;
      setTimeout(nextStroopTrial, 150);
    });
  });

  /* =============== 3) Stop-Signal =============== */
  const stopArea = document.getElementById('stopArea');
  const stopResult = document.getElementById('stopResult');
  const stopStartBtn = document.getElementById('stopStart');
  const stopResetBtn = document.getElementById('stopReset');
  const stopLeftBtn = document.getElementById('stopLeft');
  const stopRightBtn = document.getElementById('stopRight');

  let stopRunning = false;
  let stopTrials = 20;
  let stopCurrent = 0;
  let stopData = [];
  let stopCurrentDir = null;  // 'left' or 'right'
  let stopHasSignal = false;
  let stopAnswered = false;

  function renderStopStimulus(dir, hasSignal) {
    stopArea.innerHTML = '';
    const arrow = document.createElement('div');
    arrow.style.fontSize = '2rem';
    arrow.style.fontWeight = '700';
    arrow.textContent = dir === 'left' ? 'โ' : 'โ';
    const box = document.createElement('div');
    box.style.display = 'flex';
    box.style.flexDirection = 'column';
    box.style.alignItems = 'center';
    box.style.gap = '4px';
    box.appendChild(arrow);
    const helper = document.createElement('div');
    helper.style.fontSize = '0.8rem';
    helper.style.color = 'var(--muted)';
    helper.textContent = hasSignal ? 'ุธูุฑุช ุฅุดุงุฑุฉ ุชูููู: ูุง ุชุถุบุท ุฃู ุฒุฑ.' : 'ุงุฎุชุฑ ุงูุฒุฑ ุงูููุงุณุจ ูุงุชุฌุงู ุงูุณูู.';
    box.appendChild(helper);

    stopArea.appendChild(box);

    if (hasSignal) {
      const stopSign = document.createElement('div');
      stopSign.textContent = '๐';
      stopSign.style.marginTop = '6px';
      stopArea.appendChild(stopSign);
    }
  }

  function runStopTrial() {
    if (!stopRunning || stopCurrent >= stopTrials) {
      stopRunning = false;
      stopStartBtn.disabled = false;
      renderStopResult();
      return;
    }
    stopAnswered = false;
    stopCurrentDir = Math.random() < 0.5 ? 'left' : 'right';
    stopHasSignal = Math.random() < 0.3; // 30% trials with stop signal
    // ุฃูููุง ุนุฑุถ ุงูุณูู ุจุฏูู ุงูุฅุดุงุฑุฉ
    stopArea.innerHTML = '<div>...</div>';
    setTimeout(() => {
      renderStopStimulus(stopCurrentDir, false);
      if (stopHasSignal) {
        setTimeout(() => {
          // ุชุนุฏูู ุงูููุญุฉ ูุชุถููู ุฅุดุงุฑุฉ ุงูุชููู
          renderStopStimulus(stopCurrentDir, true);
        }, 300);
      }
      // ุงูููุงูุฉ ุจุนุฏ 1100ms
      setTimeout(() => {
        if (!stopRunning) return;
        let outcome;
        if (!stopHasSignal && !stopAnswered) {
          outcome = 'omission'; // ูู ูุถุบุท ูู ุงูููุช ุงูุตุญูุญ
        } else if (!stopHasSignal && stopAnswered) {
          outcome = 'correct_go';
        } else if (stopHasSignal && stopAnswered) {
          outcome = 'failed_stop';
        } else if (stopHasSignal && !stopAnswered) {
          outcome = 'correct_stop';
        }
        stopData.push({
          trial: stopCurrent + 1,
          dir: stopCurrentDir,
          hasSignal: stopHasSignal,
          answered: stopAnswered,
          outcome
        });
        stopCurrent++;
        stopArea.innerHTML = '<div style="font-size:0.8rem; color:var(--muted);">...</div>';
        setTimeout(runStopTrial, 400);
      }, 1100);
    }, 200);
  }

  function renderStopResult() {
    const total = stopData.length || 1;
    let correctGo = 0, correctStop = 0, omissions = 0, failedStops = 0;
    stopData.forEach(t => {
      if (t.outcome === 'correct_go') correctGo++;
      if (t.outcome === 'correct_stop') correctStop++;
      if (t.outcome === 'omission') omissions++;
      if (t.outcome === 'failed_stop') failedStops++;
    });
    const accuracy = Math.round(((correctGo + correctStop) / total) * 100);
    let interpretation = '';
    if (accuracy >= 80 && failedStops <= omissions) {
      interpretation = 'ูุดูุฑ ุงูุฃุฏุงุก ุฅูู ูุฏุฑุฉ ุฌูุฏุฉ ุนูู ุฅููุงู ุงูุงุณุชุฌุงุจุฉ ุจุนุฏ ุจุฏุก ุงูุญุฑูุฉ ุนูุฏูุง ุชุธูุฑ ุฅุดุงุฑุฉ ุงูุชูููู.';
    } else if (failedStops > omissions) {
      interpretation = 'ุชูุฌุฏ ุจุนุถ ุงูุตุนูุจุฉ ูู ุฅููุงู ุงููุนู ุจุนุฏ ุจุฏุก ุงูุงุณุชุฌุงุจุฉุ ููู ูุง ูุฏู ุนูู ุญุงุฌุฉ ูุชุฏุฑูุจ ุฃูุจุฑ ุนูู ุงูุชุซุจูุท ุงูุณุฑูุน.';
    } else {
      interpretation = 'ุงูุฃุฎุทุงุก ููุฒุนุฉ ุจูู ุชุฃุฎุฑ ุงูุงุณุชุฌุงุจุฉ ูุงูุชุซุจูุทุ ูููู ุฃู ูููุฏ ุชุฏุฑูุจ ุดุงูู ุนูู ุงูุชุฑููุฒ ูุถุจุท ุงูุงูุฏูุงุน.';
    }
    stopResult.style.display = 'block';
    stopResult.innerHTML = `
      <div><strong>ุงููุชูุฌุฉ ุงูุชูุฑูุจูุฉ:</strong></div>
      <div>ุงูุฏููุฉ ุงูุนุงูุฉ: <strong>${accuracy}%</strong></div>
      <div>ุงุณุชุฌุงุจุงุช ุตุญูุญุฉ ุจุฏูู ุฅุดุงุฑุฉ ุชูููู: ${correctGo}</div>
      <div>ุชูููู ูุงุฌุญ ุนูุฏ ุงูุฅุดุงุฑุฉ: ${correctStop}</div>
      <div>ุฃุฎุทุงุก ุชูููุช ุงูุงุณุชุฌุงุจุฉ: <span class="status-bad">${omissions}</span></div>
      <div>ุฃุฎุทุงุก ุงูุงุณุชูุฑุงุฑ ุฑุบู ุฅุดุงุฑุฉ ุงูุชูููู: <span class="status-bad">${failedStops}</span></div>
      <div style="margin-top:6px;">๐ง <em>${interpretation}</em></div>
    `;
    stopArea.innerHTML = '<div>ุงูุชูู ุงูุงุฎุชุจุงุฑ. ููููู ุฅุนุงุฏุฉ ุชุดุบููู ูุงุญููุง.</div>';
  }

  stopStartBtn.addEventListener('click', () => {
    stopRunning = true;
    stopCurrent = 0;
    stopData = [];
    stopStartBtn.disabled = true;
    stopResult.style.display = 'none';
    runStopTrial();
  });

  stopResetBtn.addEventListener('click', () => {
    stopRunning = false;
    stopCurrent = 0;
    stopData = [];
    stopStartBtn.disabled = false;
    stopArea.innerHTML = '<div>ุจุนุฏ ุงูุถุบุท ุนูู "ุจุฏุก"ุ ุณูุธูุฑ ุณููุ ูุฃุญูุงููุง ุฅุดุงุฑุฉ ุชูููู.</div>';
    stopResult.style.display = 'none';
  });

  function handleStopResponse(direction) {
    if (!stopRunning) return;
    if (stopAnswered) return; // ูุง ูุณูุญ ุจุฃูุซุฑ ูู ุฅุฌุงุจุฉ
    stopAnswered = true;
    // we don't check correctness of direction ูู ูุฐู ุงููุณุฎุฉุ ุงูุชุฑููุฒ ุนูู ุงูุชุซุจูุท
  }

  stopLeftBtn.addEventListener('click', () => handleStopResponse('left'));
  stopRightBtn.addEventListener('click', () => handleStopResponse('right'));

  /* =============== 4) Delay Discounting =============== */
  const delayForm = document.getElementById('delayForm');
  const delayResult = document.getElementById('delayResult');
  const delayCalcBtn = document.getElementById('delayCalc');

  delayCalcBtn.addEventListener('click', () => {
    const qs = ['q1','q2','q3','q4','q5'];
    let nowCount = 0, laterCount = 0, unanswered = 0;
    qs.forEach(name => {
      const checked = delayForm.querySelector(`input[name="${name}"]:checked`);
      if (!checked) {
        unanswered++;
        return;
      }
      if (checked.value === 'now') nowCount++;
      else laterCount++;
    });

    let styleText = '';
    if (laterCount >= 4) {
      styleText = 'ุชูุถููู ูููู ุจุดูู ูุงุถุญ ุฅูู ุงูููุงูุขุช ุงููุคุฌูุฉ ุงูุฃูุจุฑุ ููุง ูุนูุณ ูุฏุฑุฉ ุฌูุฏุฉ ุนูู ุงูุชูููุฑ ุทููู ุงููุฏู ูุชุฃุฌูู ุงูุฅุดุจุงุน.';
    } else if (nowCount >= 4) {
      styleText = 'ุชููู ุฃูุซุฑ ุฅูู ุงูููุงูุขุช ุงูููุฑูุฉุ ููู ููุท ุดุงุฆุน ูููู ููุงุฒูุชู ุจุงูุชุฏุฑูุจ ุนูู ุชุตูุฑ ุงููุณุชูุจู ููุถุน ุฃูุฏุงู ุจุนูุฏุฉ.';
    } else {
      styleText = 'ุชูุถููู ูุชูุงุฒู ุจูู ุงูุขู ูุงููุงุญูุ ููููู ุฏูุนู ุฃูุซุฑ ูุญู ุงูุฃูุฏุงู ุทูููุฉ ุงููุฏู ุนุจุฑ ุชุฏุฑูุจ ุจุณูุท ุนูู ุงูุชุฎุทูุท.';
    }

    delayResult.style.display = 'block';
    delayResult.innerHTML = `
      <div><strong>ููุฎุต ุงุฎุชูุงุฑู:</strong></div>
      <div>ุงุฎุชูุงุฑ ุงูููุงูุฃุฉ ุงูุขู: ${nowCount} ูู ูฅ</div>
      <div>ุงุฎุชูุงุฑ ุงูููุงูุฃุฉ ูุงุญููุง: ${laterCount} ูู ูฅ</div>
      ${unanswered ? `<div>ุฃุณุฆูุฉ ุบูุฑ ูุฌุงุจุฉ: ${unanswered}</div>` : ''}
      <div style="margin-top:6px;">๐ง <em>${styleText}</em></div>
      <div style="margin-top:4px; font-size:0.76rem;">(ูุฐู ุงููุชูุฌุฉ ููุชุฃูู ุงูุฐุงุชู ููุทุ ูููุณุช ุญูููุง ูุงุทุนูุง.)</div>
    `;
  });

  /* =============== 5) Visual Delay =============== */
  const visualNowBtn = document.getElementById('visualNow');
  const visualWaitBtn = document.getElementById('visualWait');
  const visualStatus = document.getElementById('visualStatus');
  let visualTimer = null;
  let visualWaiting = false;
  let visualRemaining = 0;

  visualNowBtn.addEventListener('click', () => {
    clearInterval(visualTimer);
    visualWaiting = false;
    visualRemaining = 0;
    visualStatus.innerHTML = `
      <div>๐ ูุนูููุฉ ุณุฑูุนุฉ: ูุนุธู ุงููุงุณ ููุถูููู ุงูููุงูุฃุฉ ุงูุตุบูุฑุฉ ุงูุขูุ ุญุชู ูู ูุงูุช ุงูููุงูุฃุฉ ุงููุคุฌูุฉ ุฃูุจุฑ ุจูุซูุฑ.</div>
      <div style="margin-top:4px; font-size:0.8rem;">ูููุฑ: ูุงุฐุง ูุนูู ูุฐุง ุจุงููุณุจุฉ ูุทุฑููุฉ ุงุชุฎุงุฐู ูููุฑุงุฑุงุชุ</div>
    `;
  });

  visualWaitBtn.addEventListener('click', () => {
    if (visualWaiting) return;
    visualWaiting = true;
    visualRemaining = 10;
    visualStatus.innerHTML = `<div class="countdown">ุฌุงุฑู ุงูุงูุชุธุงุฑ: ${visualRemaining} ุซุงููุฉ...</div>`;
    visualTimer = setInterval(() => {
      visualRemaining--;
      if (visualRemaining > 0) {
        visualStatus.innerHTML = `<div class="countdown">ุฌุงุฑู ุงูุงูุชุธุงุฑ: ${visualRemaining} ุซุงููุฉ...</div>`;
      } else {
        clearInterval(visualTimer);
        visualWaiting = false;
        visualStatus.innerHTML = `
          <div class="status-ok">๐ ุดูุฑุงู ุนูู ุงูุงูุชุธุงุฑ!</div>
          <div style="margin-top:4px;">
            ๐ <strong>ูุนูููุฉ ุฃุนูู:</strong> ุงูุฃุจุญุงุซ ุชุดูุฑ ุฅูู ุฃู ุงููุฏุฑุฉ ุนูู ุงูุงูุชุธุงุฑ ูุฑุชุจุทุฉ ุจูุชุงุฆุฌ ุฃูุถู ูู ุงูุตุญุฉุ ุงููุงูุ ูุงูุฏุฑุงุณุฉ.<br/>
            ๐ <em>ุชูุฑูู:</em> ุงุฎุชุฑ ุณููููุง ูุงุญุฏูุง ูู ุญูุงุชู ูููู ุฃู ุชุทุจูู ููู ูุจุฏุฃ "ุฃูุชุธุฑ ููููุงูุฃุฉ ุงูุฃูุจุฑ" ุงูููู.
          </div>
        `;
      }
    }, 1000);
  });

  /* =============== 6) Sustained Attention =============== */
  const sustainedArea = document.getElementById('sustainedArea');
  const sustainedResult = document.getElementById('sustainedResult');
  const sustainedStartBtn = document.getElementById('sustainedStart');
  const sustainedResetBtn = document.getElementById('sustainedReset');
  const sustainedHitBtn = document.getElementById('sustainedHitBtn');

  let sustainedRunning = false;
  let sustainedTrials = 30;
  let sustainedCurrent = 0;
  let sustainedCurrentDigit = null;
  let sustainedHits = 0;
  let sustainedMisses = 0;
  let sustainedFalseAlarms = 0;
  let sustainedTimer = null;
  let sustainedCanHit = false;

  function renderSustainedDigit(d) {
    sustainedArea.innerHTML = '';
    const digit = document.createElement('div');
    digit.className = 'digit-display';
    digit.textContent = d;
    sustainedArea.appendChild(digit);
  }

  function nextSustainedTrial() {
    if (!sustainedRunning || sustainedCurrent >= sustainedTrials) {
      sustainedRunning = false;
      clearInterval(sustainedTimer);
      sustainedStartBtn.disabled = false;
      renderSustainedResult();
      return;
    }
    // ุงุฎุชูุงุฑ ุฑูู ุจูู 0 - 9 ูุน ุงุญุชูุงู ูุธููุฑ 0
    sustainedCurrentDigit = Math.random() < 0.2 ? 0 : Math.floor(Math.random() * 9) + 1;
    sustainedCanHit = true;
    renderSustainedDigit(sustainedCurrentDigit);
    sustainedCurrent++;
  }

  function renderSustainedResult() {
    const totalTargets = sustainedTrials * 0.2; // ุชูุฑูุจูุฉ
    let interpretation = '';
    if (sustainedHits >= totalTargets * 0.7 && sustainedFalseAlarms <= sustainedHits) {
      interpretation = 'ูุดูุฑ ุงูุฃุฏุงุก ุฅูู ูุฏุฑุฉ ุฌูุฏุฉ ุนูู ุงูุญูุงุธ ุนูู ุงูุงูุชุจุงู ูุงูุชุดุงู ุงูุฅุดุงุฑุฉ ุงููุทููุจุฉ ุฏูู ุงูุฏูุงุน ุฒุงุฆุฏ.';
    } else if (sustainedFalseAlarms > sustainedHits) {
      interpretation = 'ุชูุฌุฏ ูุฒุนุฉ ููุถุบุท ูู ุบูุฑ ููุช ุงููุฏู (ุงูุฏูุงุน ุฃุนูู)ุ ููููู ุชุญุณูููุง ุจูุฒูุฏ ูู ุงูุชุฑููุฒ ูุงูุชููู ูุจู ุงูุถุบุท.';
    } else {
      interpretation = 'ุงููุชูุฌุฉ ูุชูุณุทุฉุ ููููู ุชุญุณูู ุงูุงูุชุจุงู ุงููุณุชูุฑ ุนุจุฑ ุชุฏุฑูุจุงุช ูุตูุฑุฉ ูุชูุฑุฑุฉ.';
    }
    sustainedResult.style.display = 'block';
    sustainedResult.innerHTML = `
      <div><strong>ุงููุชูุฌุฉ ุงูุชูุฑูุจูุฉ:</strong></div>
      <div>ุนุฏุฏ ูุฑุงุช ุงูุถุบุท ุนูุฏ ุธููุฑ 0 (ุฅุตุงุจุงุช ุตุญูุญุฉ): ${sustainedHits}</div>
      <div>ุนุฏุฏ ุงูุฃุตูุงุฑ ุงูุชู ูู ูุชู ุงูุถุบุท ุนูุฏูุง (ุฃุฎุทุงุก ุชูููุช): <span class="status-bad">${sustainedMisses}</span></div>
      <div>ุนุฏุฏ ูุฑุงุช ุงูุถุบุท ุนูุฏูุง ูู ููู ุงูุฑูู 0 (ุฅูุฐุงุฑุงุช ูุงุฐุจุฉ): <span class="status-bad">${sustainedFalseAlarms}</span></div>
      <div style="margin-top:6px;">๐ง <em>${interpretation}</em></div>
    `;
    sustainedArea.innerHTML = '<div>ุงูุชูู ุงูุงุฎุชุจุงุฑ. ููููู ุฅุนุงุฏุฉ ุชุดุบููู ูุงุญููุง.</div>';
  }

  sustainedStartBtn.addEventListener('click', () => {
    sustainedRunning = true;
    sustainedCurrent = 0;
    sustainedHits = 0;
    sustainedMisses = 0;
    sustainedFalseAlarms = 0;
    sustainedResult.style.display = 'none';
    sustainedStartBtn.disabled = true;
    nextSustainedTrial();
    clearInterval(sustainedTimer);
    sustainedTimer = setInterval(() => {
      // ุฅุฐุง ุงูุชูุช ุงููุญุงููุงุช ุณูุชู ุงูุฅููุงู ุฏุงุฎู nextSustainedTrial
      if (!sustainedRunning) {
        clearInterval(sustainedTimer);
        return;
      }
      // ุฅุฐุง ูุงู ุงูุฑูู ุงูุณุงุจู 0 ููู ูุถุบุท ุงููุณุชุฎุฏู
      if (sustainedCurrentDigit === 0 && sustainedCanHit) {
        sustainedMisses++;
      }
      nextSustainedTrial();
    }, 800);
  });

  sustainedResetBtn.addEventListener('click', () => {
    sustainedRunning = false;
    clearInterval(sustainedTimer);
    sustainedCurrent = 0;
    sustainedHits = 0;
    sustainedMisses = 0;
    sustainedFalseAlarms = 0;
    sustainedCurrentDigit = null;
    sustainedStartBtn.disabled = false;
    sustainedArea.innerHTML = '<div>ุนูุฏ ุจุฏุก ุงูุงุฎุชุจุงุฑุ ุณุชุธูุฑ ุฃุฑูุงู ูุณุท ุงูุดุงุดุฉ.</div>';
    sustainedResult.style.display = 'none';
  });

  sustainedHitBtn.addEventListener('click', () => {
    if (!sustainedRunning) return;
    if (!sustainedCanHit) return;
    if (sustainedCurrentDigit === 0) {
      sustainedHits++;
    } else {
      sustainedFalseAlarms++;
    }
    sustainedCanHit = false;
  });
</script>
</body>
</html>
