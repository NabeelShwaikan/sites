<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ø¨ÙˆØ§Ø¨Ø© Ù…Ø³Ø§Ø± â€” Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„</title>
  <link rel="stylesheet" href="assets/css/style.css">
</head>
<body>

<!-- Ø²Ø± ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„Ø«ÙŠÙ… -->
<button class="theme-toggle" onclick="toggleTheme()">
  <span>ğŸŒ“</span>
</button>

<header class="page-header">
  <h1>Ø£Ø¯ÙˆØ§Øª Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ</h1>
  <p>Ø§Ø®ØªØ± Ø§Ù„ÙØ¦Ø© Ø§Ù„ØªÙŠ ØªÙ†Ø§Ø³Ø¨ Ù†ÙˆØ¹ Ù‚Ø±Ø§Ø±ÙƒØŒ Ø«Ù… Ø§Ø®ØªØ± Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ø°ÙŠ ØªØ±ÙŠØ¯ Ø§Ø³ØªØ®Ø¯Ø§Ù…Ù‡.</p>
</header>

<main>
  <!-- Ø´Ø±ÙŠØ· Ø§Ù„ÙØ¦Ø§Øª -->
  <section id="categories-bar" class="categories-bar"></section>

  <!-- Ø¨Ø·Ø§Ù‚Ø§Øª Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ -->
  <section id="models-container" class="models-grid"></section>
</main>

<script src="assets/js/models-config.js"></script>
<script>
  const categoriesBar = document.getElementById('categories-bar');
  const container = document.getElementById('models-container');

  let currentCategory = 'all';

  function renderCategories() {
    categoriesBar.innerHTML = '';
    CATEGORIES.forEach(cat => {
      const btn = document.createElement('button');
      btn.className = 'category-btn' + (cat.id === currentCategory ? ' active' : '');
      btn.textContent = cat.name;
      btn.onclick = () => {
        currentCategory = cat.id;
        renderCategories();
        renderModels();
      };
      categoriesBar.appendChild(btn);
    });
  }

  function renderModels() {
    container.innerHTML = '';

    const filtered = MODELS.filter(m =>
      m.enabled &&
      (currentCategory === 'all' || (m.categories && m.categories.includes(currentCategory)))
    );

    if (!filtered.length) {
      container.innerHTML = '<p>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù†Ù…Ø§Ø°Ø¬ Ù…ØªØ§Ø­Ø© ØªØ­Øª Ù‡Ø°Ù‡ Ø§Ù„ÙØ¦Ø© Ø­Ø§Ù„ÙŠÙ‹Ø§.</p>';
      return;
    }

    filtered.forEach(m => {
      const card = document.createElement('article');
      card.className = 'model-card';
      card.innerHTML = `
        <h2>${m.name_ar}</h2>
        <h3>${m.name_en || ''}</h3>
        <p>${m.desc || ''}</p>
        <p class="model-serves"><strong>ÙŠÙÙÙŠØ¯:</strong> ${m.serves || ''}</p>
        <button onclick="location.href='models/${m.file}'">Ø§Ø¨Ø¯Ø£ Ø¨Ù€ ${m.short}</button>
      `;
      container.appendChild(card);
    });
  }

  renderCategories();
  renderModels();
</script>

<!-- Ø³ÙƒØ±Ø¨Øª Ø§Ù„Ø«ÙŠÙ… (Ù…Ø´ØªØ±Ùƒ) -->
<script>
  function applySavedTheme(){
    const saved = localStorage.getItem('decision-theme') || 'light';
    if(saved === 'dark'){
      document.body.dataset.theme = 'dark';
    }else{
      document.body.dataset.theme = '';
    }
  }

  function toggleTheme(){
    const isDark = document.body.dataset.theme === 'dark';
    const next = isDark ? 'light' : 'dark';
    if(next === 'dark'){
      document.body.dataset.theme = 'dark';
    }else{
      document.body.dataset.theme = '';
    }
    localStorage.setItem('decision-theme', next);
  }

  // ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø«ÙŠÙ… Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
  applySavedTheme();
</script>

</body>
</html>
